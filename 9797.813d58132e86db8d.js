"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[9797],{79979:(S,b,r)=>{r.d(b,{C:()=>y});var a=r(80529),D=r(61135),I=r(75625),c=r(70262),N=r(62843),t=r(92340),Z=r(94650);let y=(()=>{class _{constructor(o){this.httpClient=o,this.carrierDataSource=new D.X([]),this.url=t.N.API_BASE_URL,this.httpHeader={headers:new a.WM({"Content-Type":"application/json"})}}updatecarrierDataSource(o){let i=this.carrierDataSource.getValue();i.unshift(...o),this.carrierDataSource.next(i)}getCarrier(o,i,s){return this.httpClient.get(this.url+`/carriers/read?user=${o}&carrierCode=${i}&carrierName=${s}`)}getAllCarriers(o,i,s){return this.httpClient.get(this.url+`/carriers/readAll?user=${o}&pageNum=${i}&recordsPerPage=${s}`)}createCarrier(o,i,s,d,f,g,p,T,A,U,C,h,v,q,E){return this.httpClient.post(this.url+"/carriers/create",{carrierCode:o,carrierName:i,carrierAdd1:s,carrierAdd2:d,zipcode:f,suffix:g,carrierScacCode:p,hazardousMaterials:T,palletExchange:A,billFrequency:U,loadingAllowance:C,hundredWeight:h,minimumAmount:v,maximumAmount:q,user:E}).pipe((0,I.X)(1),(0,c.K)(this.httpError))}updateCarrier(o,i,s,d,f,g,p,T,A,U,C,h,v,q,E){return this.httpClient.put(this.url+"/carriers/update",{carrierCode:o,carrierName:i,carrierAdd1:s,carrierAdd2:d,zipcode:f,suffix:g,carrierScacCode:p,hazardousMaterials:T,palletExchange:A,billFrequency:U,loadingAllowance:C,hundredWeight:h,minimumAmount:v,maximumAmount:q,user:E}).pipe((0,I.X)(1),(0,c.K)(this.httpError))}httpError(o){let i="";return i=o.error instanceof ErrorEvent?o.error.message:`Error Code: ${o.status}\nMessage: ${o.message}`,console.log(i),(0,N._)(()=>new Error(i))}}return _.\u0275fac=function(o){return new(o||_)(Z.LFG(a.eN))},_.\u0275prov=Z.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})()},31555:(S,b,r)=>{r.r(b),r.d(b,{CreateComponent:()=>E});var a=r(24006),D=r(48529),I=r(35226),c=r.n(I),N=r(70879),t=r(94650),Z=r(19132),y=r(15627),_=r(79979),O=r(36895),o=r(97392),i=r(4859),s=r(59549),d=r(44144),f=r(84385),g=r(3238),p=r(73546);function T(l,u){1&l&&(t.TgZ(0,"mat-error"),t._uU(1," Only "),t.TgZ(2,"strong"),t._uU(3,"numbers "),t.qZA(),t._uU(4," are allowed "),t.qZA())}function A(l,u){1&l&&(t.TgZ(0,"mat-error"),t._uU(1," Storer is "),t.TgZ(2,"strong"),t._uU(3,"required"),t.qZA()())}function U(l,u){1&l&&(t.TgZ(0,"mat-error"),t._uU(1," Received From is "),t.TgZ(2,"strong"),t._uU(3,"required"),t.qZA()())}function C(l,u){1&l&&(t.TgZ(0,"mat-error"),t._uU(1," Quantity is "),t.TgZ(2,"strong"),t._uU(3,"required"),t.qZA()())}function h(l,u){1&l&&(t.TgZ(0,"mat-error"),t._uU(1," Only "),t.TgZ(2,"strong"),t._uU(3,"numbers"),t.qZA(),t._uU(4,"are allowed "),t.qZA())}function v(l,u){if(1&l&&(t.TgZ(0,"mat-option",60),t._uU(1),t.qZA()),2&l){const e=u.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function q(l,u){if(1&l){const e=t.EpF();t.TgZ(0,"button",61),t.NdJ("click",function(){t.CHM(e);const m=t.oxw();return t.KtG(m.addTally())}),t._uU(1," Add "),t.qZA()}}let E=(()=>{class l{constructor(e,n,m,P,M){this.router=e,this.iHeaderSvc=n,this.fb=m,this.carrierSvc=P,this.route=M,this.result=[],this.carrierOptions=[],this.update=!0,this.minDate=(new Date).toLocaleDateString("fr-CA"),this.hasError=(R,W)=>this.form.controls[R].hasError(W)}ngOnInit(){localStorage.getItem("LoggedIn")?(this.user=localStorage.getItem("userName"),this.building=localStorage.getItem("building")):(this.user=D.R.user,this.building=D.R.building),this.form=this.fb.group({storer:["",[a.kI.required,a.kI.min(0),a.kI.pattern("[0-9]{1,10}")]],storerRef:[""],billTo:[""],billToSfx:[""],billToSfx2:[""],invoice:[""],building:[""],status:[""],loadType:["",[a.kI.required]],recptType:["",[a.kI.required]],recvdFrom:["",[a.kI.required]],qty:["",[a.kI.required,a.kI.min(0),a.kI.pattern("[0-9]{1,10}")]],schdldArrival:[""],carrier:[""],actualArrival:["",[a.kI.required]],schdldtime:[""],actualtime:[""],wgt:[""],pro:[""],car:[""],authorization:[""],seal1:[""],seal2:[""],invoiceDate:["",[a.kI.required]],broken1:[""],broken2:[""],returnValue:[""],notification:[""],specialCharge:[""],chargeType:[""]}),this.carrierSvc.getAllCarriers(this.user,1,50).subscribe(e=>{this.result=e;var n=this.result[0].data[1]?.value,m=JSON.parse(n);this.carrierSource=m.returnedData,console.log("ALL CARRIERS DATA FOR ORDER UPDATE 2 DROPDOWN :"),console.log(this.carrierSource);for(const P of this.carrierSource)this.carrierOptions.push(P.CRNUMB)}),this.route.params.subscribe(e=>{this.tallyId=e.id}),this.tallyId?(this.update=!0,this.getAllSubscription=this.iHeaderSvc.getAll(this.user,this.building).subscribe(e=>{})):this.update=!1}ngOnDestroy(){this.getAllSubscription&&this.getAllSubscription.unsubscribe(),this.getTallyHeadersSubscription&&this.getTallyHeadersSubscription.unsubscribe()}addTally(){var e=this.form.value;e.returnValue=e.returnValue||"N",e.broken1=e.broken1||"N",e.broken2=e.broken2||"N",e.specialCharge=e.specialCharge||"N",e.loadType=null!=e.loadType?e.loadType.toUpperCase():null,e.recptType=null!=e.recptType?e.recptType.toUpperCase():null,e.recvdFrom=null!=e.recvdFrom?e.recvdFrom.toUpperCase():null,this.result=this.iHeaderSvc.createTally(e.storer,e.storerRef,e.status,e.loadType,e.recptType,e.recvdFrom,e.qty,e.schdldArrival,e.carrier?e.carrier.toUpperCase():"",e.actualArrival,e.building,e.pro?e.pro.toUpperCase():"",e.wgt,this.user,e.schdldtime,e.actualtime,e.authorization?e.authorization.toUpperCase():"",e.car?e.car.toUpperCase():"",e.seal1?e.seal1.toUpperCase():"",e.seal2?e.seal2.toUpperCase():"",e.invoiceDate,e.returnValue,e.broken1,e.broken2,e.specialCharge,e.notification,e.chargeType,e.billTo,e.billToSfx,e.billToSfx2).subscribe(n=>{if(this.result=n,console.log(this.result),JSON.parse(this.result[0].data[1].value).success){const m=JSON.parse(this.result[0].data[1].value).returnedData.message;this.successMessage(m),this.router.navigate(["/main-nav/tallys/read"])}else{const m=JSON.parse(this.result[0].data[1].value).returnedData.message;this.failureMessage(m)}})}successMessage(e){c().fire(e,"","success"),this.router.navigate(["/main-nav/tallys/read"])}failureMessage(e){c().fire(e,"","error")}onBack(){this.router.navigate(["/main-nav/tallys/read"])}fetchHeaders(){return this.getTallyHeadersSubscription&&this.getTallyHeadersSubscription.unsubscribe(),this.iHeaderSvc.getTallyHeaders().subscribe(e=>{})}}return l.\u0275fac=function(e){return new(e||l)(t.Y36(Z.F0),t.Y36(y.X),t.Y36(a.qu),t.Y36(_.C),t.Y36(Z.gz))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-create"]],standalone:!0,features:[t.jDz],decls:231,vars:9,consts:[[1,"over-Flow"],[1,"title"],["mat-button","",1,"backButton","go-back-btn",3,"click"],[1,"tally-serach-form"],[1,"form","over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","required","","formControlName","storer"],[4,"ngIf"],["matInput","","formControlName","storerRef",2,"text-transform","uppercase"],[1,"form-group1"],["for","inputField",1,"form-heading"],[1,"form-input"],["matInput","","formControlName","billTo"],["matInput","","formControlName","billToSfx",2,"text-transform","uppercase"],["matInput","","formControlName","billToSfx2",2,"text-transform","uppercase"],["matInput","","formControlName","invoice","readonly",""],["matInput","","formControlName","building","readonly",""],["formControlName","status",3,"disabled"],["value",""],["value","I"],["value","A"],["value","P"],["value","S"],["value","W"],["value","D"],["value","C"],["value","N"],["formControlName","loadType"],["value","F"],["formControlName","recptType"],["value","L"],["value","O"],["value","T"],["matInput","","required","","formControlName","recvdFrom",2,"text-transform","uppercase"],["matInput","","formControlName","qty"],["appearance","outline","formControlName","returnValue"],["value","Y"],["matInput","","formControlName","authorization",2,"text-transform","uppercase"],["matInput","","type","date","formControlName","schdldArrival"],["matInput","","type","time","formControlName","schdldtime"],["matInput","","type","date","formControlName","actualArrival","required",""],["matInput","","type","time","formControlName","actualtime","required",""],["matInput","","formControlName","pro",2,"text-transform","uppercase"],["formControlName","carrier","required",""],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","car",2,"text-transform","uppercase"],["matInput","","formControlName","seal1",2,"text-transform","uppercase"],["formControlName","broken1"],["matInput","","formControlName","seal2",2,"text-transform","uppercase"],["formControlName","broken2"],["formControlName","notification"],["value","E"],["matInput","","type","date","formControlName","invoiceDate"],["formControlName","specialCharge"],["matInput","","formControlName","wgt"],["formControlName","chargeType"],["value","H"],["class","buttons addButton new-tally-form-btn","type","submit","mat-raised-button","",3,"click",4,"ngIf"],[3,"value"],["type","submit","mat-raised-button","",1,"buttons","addButton","new-tally-form-btn",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1)(3,"button",2),t.NdJ("click",function(){return n.onBack()}),t.TgZ(4,"mat-icon"),t._uU(5,"navigate_before "),t.qZA()(),t._uU(6," Tally Create"),t.qZA()(),t.TgZ(7,"mat-card-content",3)(8,"form",4)(9,"div",5)(10,"div",6)(11,"mat-form-field",7)(12,"mat-label"),t._uU(13,"Storer "),t.qZA(),t._UZ(14,"input",8),t.YNc(15,T,5,0,"mat-error",9),t.YNc(16,A,4,0,"mat-error",9),t.qZA(),t.TgZ(17,"mat-form-field",7)(18,"mat-label"),t._uU(19," Storer Reference "),t.qZA(),t._UZ(20,"input",10),t.qZA(),t.TgZ(21,"div",11)(22,"label",12),t._uU(23,"Bill To"),t.qZA(),t.TgZ(24,"div",13)(25,"mat-form-field",7)(26,"mat-label"),t._uU(27,"Bill To"),t.qZA(),t._UZ(28,"input",14),t.qZA(),t.TgZ(29,"mat-form-field",7)(30,"mat-label"),t._uU(31,"Suffix"),t.qZA(),t._UZ(32,"input",15),t.qZA(),t.TgZ(33,"mat-form-field",7)(34,"mat-label"),t._uU(35," Suffix 2"),t.qZA(),t._UZ(36,"input",16),t.qZA()()(),t.TgZ(37,"div")(38,"mat-form-field",7)(39,"mat-label"),t._uU(40," Invoice "),t.qZA(),t._UZ(41,"input",17),t.qZA(),t.TgZ(42,"mat-form-field",7)(43,"mat-label"),t._uU(44," Building "),t.qZA(),t._UZ(45,"input",18),t.qZA(),t.TgZ(46,"mat-form-field",7)(47,"mat-label"),t._uU(48," Status "),t.qZA(),t.TgZ(49,"mat-select",19)(50,"mat-option",20),t._uU(51,"--select--"),t.qZA(),t.TgZ(52,"mat-option",21),t._uU(53," I - Intransit "),t.qZA(),t.TgZ(54,"mat-option",22),t._uU(55," A - Arrived (at dock) "),t.qZA(),t.TgZ(56,"mat-option",23),t._uU(57," P - Put Away "),t.qZA(),t.TgZ(58,"mat-option",24),t._uU(59," S - Submitted for W/R print "),t.qZA(),t.TgZ(60,"mat-option",25),t._uU(61," W - W/R printed "),t.qZA(),t.TgZ(62,"mat-option",26),t._uU(63," D - Deleted "),t.qZA(),t.TgZ(64,"mat-option",27),t._uU(65," C - Cancelled "),t.qZA(),t.TgZ(66,"mat-option",28),t._uU(67," N - Notified of Warehouse Receipt "),t.qZA()()()(),t.TgZ(68,"mat-form-field",7)(69,"mat-label"),t._uU(70,"Load Type "),t.qZA(),t.TgZ(71,"mat-select",29)(72,"mat-option",20),t._uU(73,"--select--"),t.qZA(),t.TgZ(74,"mat-option",24),t._uU(75,"S = Slip Sheet "),t.qZA(),t.TgZ(76,"mat-option",30),t._uU(77,"F = Floor unloaded "),t.qZA(),t.TgZ(78,"mat-option",27),t._uU(79,"C = Clamp "),t.qZA(),t.TgZ(80,"mat-option",23),t._uU(81,"P = Pallet "),t.qZA()()(),t.TgZ(82,"mat-form-field",7)(83,"mat-label"),t._uU(84,"Receipt Type "),t.qZA(),t.TgZ(85,"mat-select",31)(86,"mat-option",20),t._uU(87,"--select--"),t.qZA(),t.TgZ(88,"mat-option",32),t._uU(89," L = Less than truckload "),t.qZA(),t.TgZ(90,"mat-option",27),t._uU(91," C = Car load "),t.qZA(),t.TgZ(92,"mat-option",24),t._uU(93," S = 20 Ft. Container "),t.qZA(),t.TgZ(94,"mat-option",33),t._uU(95," O = Container "),t.qZA(),t.TgZ(96,"mat-option",23),t._uU(97," P = Pallet"),t.qZA(),t.TgZ(98,"mat-option",34),t._uU(99," T = Truckload"),t.qZA()()(),t.TgZ(100,"mat-form-field",7)(101,"mat-label"),t._uU(102,"Received From "),t.qZA(),t._UZ(103,"input",35),t.YNc(104,U,4,0,"mat-error",9),t.qZA(),t.TgZ(105,"mat-form-field",7)(106,"mat-label"),t._uU(107,"Total Quantity "),t.qZA(),t._UZ(108,"input",36),t.YNc(109,C,4,0,"mat-error",9),t.YNc(110,h,5,0,"mat-error",9),t.qZA(),t.TgZ(111,"mat-form-field",7)(112,"mat-label"),t._uU(113,"Returned"),t.qZA(),t.TgZ(114,"mat-select",37)(115,"mat-option",20),t._uU(116,"--select--"),t.qZA(),t.TgZ(117,"mat-option",38),t._uU(118,"Yes"),t.qZA(),t.TgZ(119,"mat-option",28),t._uU(120,"No"),t.qZA()()(),t.TgZ(121,"mat-form-field",7)(122,"mat-label"),t._uU(123,"Authorization "),t.qZA(),t._UZ(124,"input",39),t.qZA(),t.TgZ(125,"mat-form-field",7)(126,"mat-label"),t._uU(127,"Schedule Arrival date"),t.qZA(),t._UZ(128,"input",40),t.qZA(),t.TgZ(129,"mat-form-field",7)(130,"mat-label"),t._uU(131,"Schedule Arrival time"),t.qZA(),t._UZ(132,"input",41),t.qZA(),t._UZ(133,"br"),t.TgZ(134,"mat-form-field",7)(135,"mat-label"),t._uU(136,"Actual Arrival date"),t.qZA(),t._UZ(137,"input",42),t.qZA(),t.TgZ(138,"mat-form-field",7)(139,"mat-label"),t._uU(140,"Actual Arrival time"),t.qZA(),t._UZ(141,"input",43),t.qZA(),t._UZ(142,"br"),t.TgZ(143,"mat-form-field",7)(144,"mat-label"),t._uU(145,"Pro Number"),t.qZA(),t._UZ(146,"input",44),t.qZA(),t.TgZ(147,"mat-form-field",7)(148,"mat-label"),t._uU(149,"Carrier"),t.qZA(),t.TgZ(150,"mat-select",45),t.YNc(151,v,2,2,"mat-option",46),t.qZA()(),t.TgZ(152,"mat-form-field",7)(153,"mat-label"),t._uU(154,"Car/Trailer No"),t.qZA(),t._UZ(155,"input",47),t.qZA(),t.TgZ(156,"div")(157,"mat-form-field",7)(158,"mat-label"),t._uU(159,"Seal 1"),t.qZA(),t._UZ(160,"input",48),t.qZA(),t.TgZ(161,"mat-form-field",7)(162,"mat-label"),t._uU(163,"Broken"),t.qZA(),t.TgZ(164,"mat-select",49)(165,"mat-option",20),t._uU(166,"--select--"),t.qZA(),t.TgZ(167,"mat-option",38),t._uU(168,"Yes"),t.qZA(),t.TgZ(169,"mat-option",28),t._uU(170,"No"),t.qZA()()()(),t.TgZ(171,"div")(172,"mat-form-field",7)(173,"mat-label"),t._uU(174,"Seal 2"),t.qZA(),t._UZ(175,"input",50),t.qZA(),t.TgZ(176,"mat-form-field",7)(177,"mat-label"),t._uU(178,"Broken"),t.qZA(),t.TgZ(179,"mat-select",51)(180,"mat-option",20),t._uU(181,"--select--"),t.qZA(),t.TgZ(182,"mat-option",38),t._uU(183,"Yes"),t.qZA(),t.TgZ(184,"mat-option",28),t._uU(185,"No"),t.qZA()()()(),t.TgZ(186,"mat-form-field",7)(187,"mat-label"),t._uU(188,"Notification"),t.qZA(),t.TgZ(189,"mat-select",52)(190,"mat-option",20),t._uU(191,"--select--"),t.qZA(),t.TgZ(192,"mat-option",26),t._uU(193," D - Receiving Documents exist"),t.qZA(),t.TgZ(194,"mat-option",53),t._uU(195," E - Electronic/EDI "),t.qZA(),t.TgZ(196,"mat-option",28),t._uU(197,"N - No notification was received"),t.qZA()()(),t.TgZ(198,"mat-form-field",7)(199,"mat-label"),t._uU(200,"Invoice Date"),t.qZA(),t._UZ(201,"input",54),t.qZA(),t.TgZ(202,"mat-form-field",7)(203,"mat-label"),t._uU(204,"Special Charge"),t.qZA(),t.TgZ(205,"mat-select",55)(206,"mat-option",20),t._uU(207,"--select--"),t.qZA(),t.TgZ(208,"mat-option",38),t._uU(209,"Yes"),t.qZA(),t.TgZ(210,"mat-option",28),t._uU(211,"No"),t.qZA()()(),t.TgZ(212,"mat-form-field",7)(213,"mat-label"),t._uU(214,"Override Weight"),t.qZA(),t._UZ(215,"input",56),t.qZA(),t.TgZ(216,"mat-form-field",7)(217,"mat-label"),t._uU(218," Charge Type "),t.qZA(),t.TgZ(219,"mat-select",57)(220,"mat-option",20),t._uU(221,"--select--"),t.qZA(),t.TgZ(222,"mat-option",28),t._uU(223,"N = No Charge W/R "),t.qZA(),t.TgZ(224,"mat-option",26),t._uU(225," D = Distribution Only W/R "),t.qZA(),t.TgZ(226,"mat-option",24),t._uU(227,"S = Storage Only W/R "),t.qZA(),t.TgZ(228,"mat-option",58),t._uU(229," H = Handling Only W/R "),t.qZA()()()()(),t.YNc(230,q,2,0,"button",59),t.qZA()()()),2&e&&(t.xp6(8),t.Q6J("formGroup",n.form),t.xp6(7),t.Q6J("ngIf",n.form.controls.storer.hasError("pattern")),t.xp6(1),t.Q6J("ngIf",n.form.controls.storer.hasError("required")),t.xp6(33),t.Q6J("disabled",!0),t.xp6(55),t.Q6J("ngIf",n.form.controls.recvdFrom.hasError("required")),t.xp6(5),t.Q6J("ngIf",n.form.controls.storer.hasError("required")),t.xp6(1),t.Q6J("ngIf",n.form.controls.qty.hasError("pattern")),t.xp6(41),t.Q6J("ngForOf",n.carrierOptions),t.xp6(79),t.Q6J("ngIf",!n.update))},dependencies:[N.m,O.sg,O.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.sg,a.u,o.Hw,i.lW,s.TO,s.KE,s.hX,d.Nt,f.gD,g.ey,p.a8,p.dk,p.dn,p.n5]}),l})()}}]);