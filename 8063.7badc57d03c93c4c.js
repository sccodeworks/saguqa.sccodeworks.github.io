"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[8063],{79979:(R,S,r)=>{r.d(S,{C:()=>O});var _=r(80529),n=r(61135),g=r(75625),b=r(70262),D=r(62843),N=r(92340),e=r(94650);let O=(()=>{class m{constructor(o){this.httpClient=o,this.carrierDataSource=new n.X([]),this.url=N.N.API_BASE_URL,this.httpHeader={headers:new _.WM({"Content-Type":"application/json"})}}updatecarrierDataSource(o){let i=this.carrierDataSource.getValue();i.unshift(...o),this.carrierDataSource.next(i)}getCarrier(o,i,u){return this.httpClient.get(this.url+`/carriers/read?user=${o}&carrierCode=${i}&carrierName=${u}`)}getAllCarriers(o,i,u){return this.httpClient.get(this.url+`/carriers/readAll?user=${o}&pageNum=${i}&recordsPerPage=${u}`)}createCarrier(o,i,u,d,T,h,Z,A,p,C,U,v,I,E,l){return this.httpClient.post(this.url+"/carriers/create",{carrierCode:o,carrierName:i,carrierAdd1:u,carrierAdd2:d,zipcode:T,suffix:h,carrierScacCode:Z,hazardousMaterials:A,palletExchange:p,billFrequency:C,loadingAllowance:U,hundredWeight:v,minimumAmount:I,maximumAmount:E,user:l}).pipe((0,g.X)(1),(0,b.K)(this.httpError))}updateCarrier(o,i,u,d,T,h,Z,A,p,C,U,v,I,E,l){return this.httpClient.put(this.url+"/carriers/update",{carrierCode:o,carrierName:i,carrierAdd1:u,carrierAdd2:d,zipcode:T,suffix:h,carrierScacCode:Z,hazardousMaterials:A,palletExchange:p,billFrequency:C,loadingAllowance:U,hundredWeight:v,minimumAmount:I,maximumAmount:E,user:l}).pipe((0,g.X)(1),(0,b.K)(this.httpError))}httpError(o){let i="";return i=o.error instanceof ErrorEvent?o.error.message:`Error Code: ${o.status}\nMessage: ${o.message}`,console.log(i),(0,D._)(()=>new Error(i))}}return m.\u0275fac=function(o){return new(o||m)(e.LFG(_.eN))},m.\u0275prov=e.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},68063:(R,S,r)=>{r.r(S),r.d(S,{UpdateComponent:()=>E});var _=r(36895),n=r(24006),g=r(48529),b=r(35226),D=r.n(b),N=r(70879),e=r(94650),O=r(19132),m=r(15627),q=r(11240),o=r(79979),i=r(97392),u=r(4859),d=r(59549),T=r(44144),h=r(84385),Z=r(3238),A=r(99602),p=r(73546);function C(l,f){1&l&&(e.TgZ(0,"mat-error"),e._uU(1," Only "),e.TgZ(2,"strong"),e._uU(3,"numbers "),e.qZA(),e._uU(4," are allowed "),e.qZA())}function U(l,f){1&l&&(e.TgZ(0,"mat-error"),e._uU(1," Quantity From is "),e.TgZ(2,"strong"),e._uU(3,"required"),e.qZA()())}function v(l,f){if(1&l&&(e.TgZ(0,"mat-option",35),e._uU(1),e.qZA()),2&l){const a=f.$implicit;e.Q6J("value",a),e.xp6(1),e.AsE(" ",a.value,"- ",a.SCACcode," ")}}function I(l,f){if(1&l){const a=e.EpF();e.TgZ(0,"button",61),e.NdJ("click",function(){e.CHM(a);const s=e.oxw();return e.KtG(s.updateTally(s.tallyId))}),e._uU(1," Update "),e.qZA()}}let E=(()=>{class l{constructor(a,t,s,c,y,P,M){this.router=a,this.iHeaderSvc=t,this.storerService=s,this.fb=c,this.route=y,this.carrierSvc=P,this.datePipe=M,this.singleTally=[],this.carrierOptions=[],this.update=!0,this.minDate=(new Date).toLocaleDateString("fr-CA")}ngOnInit(){this.element=history.state,console.log("TALLY ELEMENT WITH SINGLE RECORD FOR UPDATING"),console.log(this.element),localStorage.getItem("LoggedIn")?(this.user=localStorage.getItem("userName"),this.building=localStorage.getItem("building")):(this.user=g.R.user,this.building=g.R.building),this.sTime=this.element.IHSCHT,this.form=this.fb.group({storer:this.element.IHSTOR,storerRef:this.element.IHSTRF,billTo:this.element.IHCUST,billToSfx:this.element.IHCSFX,billToSfx2:this.element.IHCSF2,invoice:this.element.IHINVO,building:this.element.IHBLDG,status:this.element.IHRCPS,loadType:this.element.IHLDTY,recptType:this.element.IHRCPT,recvdFrom:this.element.IHCONS,qty:[this.element.IHTQTY,[n.kI.required,n.kI.min(0),n.kI.pattern("[0-9]{1,10}")]],schedule:this.element.IHSCHA,Actual:this.element.IHACTA,schdldArrival:[this.element.IHSCHA,[n.kI.required]],actualArrival:[this.element.IHACTA,[n.kI.required]],schdldtime:[this.element.IHSCHT,[n.kI.required]],actualtime:this.element.IHACTT,wgt:this.element.IHTWGT,carrier:this.element.IHCARR,pro:this.element.IHPRO,car:this.element.IHCAR,authorization:this.element.IHAUTH,seal1:this.element.IHSEA1,seal2:this.element.IHSEA2,invoiceDate:this.element.IHINDT,broken1:this.element.IHBRK1,broken2:this.element.IHBRK2,returnValue:this.element.IHRTRN,notification:this.element.INEDIF,specialCharge:this.element.IHSPCG,chargeType:this.element.IHCHTY}),this.form.updateValueAndValidity(),this.route.params.subscribe(a=>{this.tallyId=a.id,console.log(this.tallyId)}),console.log(this.element.IHCARR),this.carrierSvc.getAllCarriers(this.user,1,50).subscribe(a=>{this.result=a;var t=this.result[0].data[1]?.value,s=JSON.parse(t);this.carrierSource=s.returnedData,console.log("ALL CARRIERS DATA FOR ORDER UPDATE 2 DROPDOWN :"),console.log(this.carrierSource);for(const c of this.carrierSource)this.carrierOptions.push({value:c.CRNUMB,SCACcode:c.CRSCAC})}),this.tallyId=this.element.IHTALY,console.log(this.tallyId,"Talyy Id"),this.storerService.getAll(this.user,this.element.IHSTOR).subscribe(a=>{this.result=a;var t=this.result[0].data[1]?.value,s=JSON.parse(t);this.duplicateSource=s.returnedData,console.log("STORER FULL DATA BY USING STORER NUMBER"),console.log(this.duplicateSource[0]),console.log("STORER NAME FOR FULL STORER"),console.log(this.duplicateSource[0].STNAME),this.fullStorer=this.element.IHSTOR+"  "+this.duplicateSource[0].STNAME})}ngOnDestroy(){this.getTallyHeadersSubscription&&this.getTallyHeadersSubscription.unsubscribe(),this.updateTallySubscription&&this.updateTallySubscription.unsubscribe()}validateYearLength(a){const t=a.value;return t&&t.toString().length>4?{invalidYear:!0}:null}changeTimeFormat(a){if(a)return a.replace(/(.{2})$/,":$1")}formatCustomTime(a){var t=a+"";return null!=t&&t.length>=4?(console.log(t.substring(0,2)+":"+t.substring(2,4)),t.substring(0,2)+":"+t.substring(2,4)):(console.log(t.length),t)}closeDialog(){}onBack(){this.router.navigate(["/main-nav/tallys/read"])}updateTally(a){var t=this.form.value;console.log(t),t.returnValue=t.returnValue?"Y":"N",t.broken1=t.broken1?"Y":"N",t.broken2=t.broken2?"Y":"N",t.specialCharge=t.specialCharge?"Y":"N",t.loadType=null!=t.loadType?t.loadType.toUpperCase():null,t.recptType=null!=t.recptType?t.recptType.toUpperCase():null,t.recvdFrom=null!=t.recvdFrom?t.recvdFrom.toUpperCase():null,t.user=this.user,console.log(t),this.updateTallySubscription&&this.updateTallySubscription.unsubscribe(),this.updateTallySubscription=this.iHeaderSvc.updateTally(t.storer,t.storerRef,t.loadType,t.recptType,t.recvdFrom,t.qty,t.schdldArrival,t.carrier,t.actualArrival,t.building,t.pro,t.wgt,this.user,t.schdldtime,t.actualtime,t.authorization?t.authorization.toUpperCase():"",t.car?t.car.toUpperCase():"",t.seal1?t.seal1.toUpperCase():"",t.seal2?t.seal2.toUpperCase():"",t.invoiceDate,t.returnValue,t.broken1?t.broken1.toUpperCase():"",t.broken2?t.broken2.toUpperCase():"",t.specialCharge?t.specialCharge.toUpperCase():"",t.notification?t.notification.toUpperCase():"",t.chargeType,t.billTo,t.billToSfx,t.billToSfx2,this.tallyId).subscribe(s=>{if(JSON.parse(s[0].data[1].value).success){const c=JSON.parse(s[0].data[1].value).returnedData.message;this.successMessage(c),this.router.navigate(["/main-nav/tallys/read"])}else{const c=JSON.parse(s[0].data[1].value).returnedData.message;this.failureMessage(c)}})}successMessage(a){D().fire(a,"","success"),this.router.navigate(["/main-nav/tallys/read"])}failureMessage(a){D().fire(a,"","error")}fetchHeaders(){return this.getTallyHeadersSubscription&&this.getTallyHeadersSubscription.unsubscribe(),this.iHeaderSvc.getTallyHeaders().subscribe(a=>{})}specialcharge(){this.router.navigate(["/main-nav/ww-special-charges/read"])}}return l.\u0275fac=function(a){return new(a||l)(e.Y36(O.F0),e.Y36(m.X),e.Y36(q.h),e.Y36(n.qu),e.Y36(O.gz),e.Y36(o.C),e.Y36(_.uU))},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-update"]],standalone:!0,features:[e._Bn([_.uU]),e.jDz],decls:195,vars:9,consts:[[1,"over-Flow"],[1,"title"],["mat-button","",1,"backButton","go-back-btn",3,"click"],[1,"buttons"],["mat-button","",1,"addButton",3,"click"],[1,"tally-serach-form"],[1,"form","over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["readonly","","matInput","","required","","formControlName","storer",3,"value"],[4,"ngIf"],["matInput","","formControlName","storerRef",2,"text-transform","uppercase"],[1,"form-group1"],["for","inputField",1,"form-heading"],[1,"form-input"],["matInput","","formControlName","billTo"],["matInput","","formControlName","billToSfx",2,"text-transform","uppercase"],["matInput","","formControlName","billToSfx2",2,"text-transform","uppercase"],["readonly","","matInput","","formControlName","invoice",2,"text-transform","uppercase"],["readonly","","matInput","","formControlName","building",2,"text-transform","uppercase"],["readonly","","matInput","","formControlName","status",2,"text-transform","uppercase"],["formControlName","loadType"],["value","S"],["value","F"],["value","C"],["value","P"],["formControlName","recptType"],["value","L"],["value","O"],["value","T"],["matInput","","required","","formControlName","recvdFrom",2,"text-transform","uppercase"],["matInput","","formControlName","qty"],["appearance","outline"],["appearance","outline","formControlName","returnValue"],[3,"value"],["matInput","","formControlName","authorization",2,"text-transform","uppercase"],["matInput","","type","date","formControlName","schdldArrival","required",""],["matInput","","type","time","formControlName","schdldtime","required",""],["matInput","","type","date","formControlName","actualArrival","required",""],["matInput","","type","time","formControlName","actualtime","required",""],["matInput","","formControlName","pro",2,"text-transform","uppercase"],["formControlName","carrier","required",""],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","car",2,"text-transform","uppercase"],["matInput","","formControlName","seal1",2,"text-transform","uppercase"],["formControlName","broken1"],["value","Y"],["value","N"],["matInput","","formControlName","seal2",2,"text-transform","uppercase"],["formControlName","broken2"],["formControlName","notification"],["value","D"],["value","E"],["type","date","matInput","","formControlName","invoiceDate"],["invoiceDatePicker",""],["formControlName","specialCharge"],["matInput","","formControlName","wgt"],["formControlName","chargeType"],["value","H"],["class","buttons addButton","mat-raised-button","",3,"click",4,"ngIf"],["mat-raised-button","",1,"buttons","addButton",3,"click"]],template:function(a,t){1&a&&(e.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1)(3,"button",2),e.NdJ("click",function(){return t.onBack()}),e.TgZ(4,"mat-icon"),e._uU(5,"navigate_before "),e.qZA()(),e._uU(6),e.qZA(),e.TgZ(7,"div",3)(8,"button",4),e.NdJ("click",function(){return t.specialcharge()}),e._uU(9," Special Charges "),e.qZA()()(),e.TgZ(10,"mat-card-content",5)(11,"form",6)(12,"div",7)(13,"div",8)(14,"mat-form-field",9)(15,"mat-label"),e._uU(16,"Storer "),e.qZA(),e._UZ(17,"input",10),e.YNc(18,C,5,0,"mat-error",11),e.qZA(),e.TgZ(19,"mat-form-field",9)(20,"mat-label"),e._uU(21," Storer Reference "),e.qZA(),e._UZ(22,"input",12),e.qZA(),e.TgZ(23,"div",13)(24,"label",14),e._uU(25,"Bill To"),e.qZA(),e.TgZ(26,"div",15)(27,"mat-form-field",9)(28,"mat-label"),e._uU(29,"Bill To"),e.qZA(),e._UZ(30,"input",16),e.qZA(),e.TgZ(31,"mat-form-field",9)(32,"mat-label"),e._uU(33,"Suffix"),e.qZA(),e._UZ(34,"input",17),e.qZA(),e.TgZ(35,"mat-form-field",9)(36,"mat-label"),e._uU(37," Suffix 2"),e.qZA(),e._UZ(38,"input",18),e.qZA()()(),e.TgZ(39,"mat-form-field",9)(40,"mat-label"),e._uU(41," Invoice "),e.qZA(),e._UZ(42,"input",19),e.qZA(),e.TgZ(43,"mat-form-field",9)(44,"mat-label"),e._uU(45," Building "),e.qZA(),e._UZ(46,"input",20),e.qZA(),e.TgZ(47,"mat-form-field",9)(48,"mat-label"),e._uU(49," Status"),e.qZA(),e._UZ(50,"input",21),e.qZA(),e.TgZ(51,"mat-form-field",9)(52,"mat-label"),e._uU(53,"Load Type "),e.qZA(),e.TgZ(54,"mat-select",22)(55,"mat-option",23),e._uU(56,"S = Slip Sheet "),e.qZA(),e.TgZ(57,"mat-option",24),e._uU(58,"F = Floor unloaded "),e.qZA(),e.TgZ(59,"mat-option",25),e._uU(60,"C = Clamp "),e.qZA(),e.TgZ(61,"mat-option",26),e._uU(62,"P = Pallet "),e.qZA()()(),e.TgZ(63,"mat-form-field",9)(64,"mat-label"),e._uU(65,"Receipt Type "),e.qZA(),e.TgZ(66,"mat-select",27)(67,"mat-option",28),e._uU(68," L = Less than truckload "),e.qZA(),e.TgZ(69,"mat-option",25),e._uU(70," C = Car load "),e.qZA(),e.TgZ(71,"mat-option",23),e._uU(72," S = 20 Ft. Container "),e.qZA(),e.TgZ(73,"mat-option",29),e._uU(74," O = Container "),e.qZA(),e.TgZ(75,"mat-option",26),e._uU(76," P = Pallet"),e.qZA(),e.TgZ(77,"mat-option",30),e._uU(78," T = Truckload"),e.qZA()()(),e.TgZ(79,"mat-form-field",9)(80,"mat-label"),e._uU(81,"Received from "),e.qZA(),e._UZ(82,"input",31),e.qZA(),e.TgZ(83,"mat-form-field",9)(84,"mat-label"),e._uU(85," Total Quantity "),e.qZA(),e._UZ(86,"input",32),e.YNc(87,U,4,0,"mat-error",11),e.qZA(),e.TgZ(88,"mat-form-field",33)(89,"mat-label"),e._uU(90,"Returned "),e.qZA(),e.TgZ(91,"mat-select",34)(92,"mat-option",35),e._uU(93,"Yes"),e.qZA(),e.TgZ(94,"mat-option",35),e._uU(95,"No"),e.qZA()()(),e.TgZ(96,"mat-form-field",9)(97,"mat-label"),e._uU(98,"Authorization "),e.qZA(),e._UZ(99,"input",36),e.qZA(),e.TgZ(100,"mat-form-field",9)(101,"mat-label"),e._uU(102,"Schedule Arrival date"),e.qZA(),e._UZ(103,"input",37),e.qZA(),e.TgZ(104,"mat-form-field",9)(105,"mat-label"),e._uU(106,"Schedule Arrival time"),e.qZA(),e._UZ(107,"input",38),e.qZA(),e._UZ(108,"br"),e.TgZ(109,"mat-form-field",9)(110,"mat-label"),e._uU(111,"Actual Arrival date"),e.qZA(),e._UZ(112,"input",39),e.qZA(),e.TgZ(113,"mat-form-field",9)(114,"mat-label"),e._uU(115,"Actual Arrival time"),e.qZA(),e._UZ(116,"input",40),e.qZA(),e.TgZ(117,"mat-form-field",9)(118,"mat-label"),e._uU(119,"Pro Number "),e.qZA(),e._UZ(120,"input",41),e.qZA(),e.TgZ(121,"mat-form-field",9)(122,"mat-label"),e._uU(123,"Carrier"),e.qZA(),e.TgZ(124,"mat-select",42),e.YNc(125,v,2,3,"mat-option",43),e.qZA()(),e.TgZ(126,"mat-form-field",9)(127,"mat-label"),e._uU(128," Car/Trailer No "),e.qZA(),e._UZ(129,"input",44),e.qZA(),e.TgZ(130,"mat-form-field",9)(131,"mat-label"),e._uU(132,"Seal 1"),e.qZA(),e._UZ(133,"input",45),e.qZA(),e.TgZ(134,"mat-form-field",9)(135,"mat-label"),e._uU(136,"Broken 1"),e.qZA(),e.TgZ(137,"mat-select",46)(138,"mat-option",47),e._uU(139,"Y = Yes"),e.qZA(),e.TgZ(140,"mat-option",48),e._uU(141,"N = No"),e.qZA()()(),e.TgZ(142,"mat-form-field",9)(143,"mat-label"),e._uU(144,"Seal 2"),e.qZA(),e._UZ(145,"input",49),e.qZA(),e.TgZ(146,"mat-form-field",9)(147,"mat-label"),e._uU(148,"Broken 2"),e.qZA(),e.TgZ(149,"mat-select",50)(150,"mat-option",47),e._uU(151,"Y = Yes"),e.qZA(),e.TgZ(152,"mat-option",48),e._uU(153,"N = No"),e.qZA()()(),e.TgZ(154,"mat-form-field",9)(155,"mat-label"),e._uU(156,"Notification"),e.qZA(),e.TgZ(157,"mat-select",51)(158,"mat-option",52),e._uU(159," D = Receiving Documents exist"),e.qZA(),e.TgZ(160,"mat-option",53),e._uU(161," E = Electronic/EDI "),e.qZA(),e.TgZ(162,"mat-option",48),e._uU(163," N = no notification was received"),e.qZA()()(),e.TgZ(164,"mat-form-field",9)(165,"mat-label"),e._uU(166,"Invoice Date"),e.qZA(),e._UZ(167,"input",54)(168,"mat-datepicker",null,55),e.qZA(),e.TgZ(170,"mat-form-field",33)(171,"mat-label"),e._uU(172,"Special Charge"),e.qZA(),e.TgZ(173,"mat-select",56)(174,"mat-option",47),e._uU(175,"Y = Yes"),e.qZA(),e.TgZ(176,"mat-option",48),e._uU(177,"N = No"),e.qZA()()(),e.TgZ(178,"mat-form-field",9)(179,"mat-label"),e._uU(180,"Override Weight"),e.qZA(),e._UZ(181,"input",57),e.qZA(),e.TgZ(182,"mat-form-field",33)(183,"mat-label"),e._uU(184," Charge Type "),e.qZA(),e.TgZ(185,"mat-select",58)(186,"mat-option",48),e._uU(187,"N = No Charge W/R "),e.qZA(),e.TgZ(188,"mat-option",52),e._uU(189," D = Distribution Only W/R "),e.qZA(),e.TgZ(190,"mat-option",23),e._uU(191,"S = Storage Only W/R "),e.qZA(),e.TgZ(192,"mat-option",59),e._uU(193," H = Handling Only W/R "),e.qZA()()()()(),e.YNc(194,I,2,0,"button",60),e.qZA()()()),2&a&&(e.xp6(6),e.hij("Tally ",t.element.IHTALY," "),e.xp6(5),e.Q6J("formGroup",t.form),e.xp6(6),e.s9C("value",t.fullStorer),e.xp6(1),e.Q6J("ngIf",t.form.controls.storer.hasError("pattern")),e.xp6(69),e.Q6J("ngIf",t.form.controls.qty.hasError("required")),e.xp6(5),e.Q6J("value",!0),e.xp6(2),e.Q6J("value",!1),e.xp6(31),e.Q6J("ngForOf",t.carrierOptions),e.xp6(69),e.Q6J("ngIf",t.update))},dependencies:[N.m,_.sg,_.O5,n._Y,n.Fj,n.JJ,n.JL,n.Q7,n.sg,n.u,i.Hw,u.lW,d.TO,d.KE,d.hX,T.Nt,h.gD,Z.ey,A.Mq,p.a8,p.dk,p.dn,p.n5],styles:[".mat-form-field[_ngcontent-%COMP%]{padding-right:10px}"]}),l})()}}]);